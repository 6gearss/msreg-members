# MotorsportReg Member Manager

This project contains a set of python scripts to interact with the MotorsportReg API to manage member data.

## Scripts

### 1. `main.py`
This is the primary script to list members from your organization.
- CONNECTS to the API.
- FETCHES all members.
- EXPORTS a list of members to the console in CSV format.
  - Format: `firstName,lastName,memberId,uniqueId,memberEnd`
- GENERATES `available_fields.txt` containing all unique JSON keys found in the response.

### 2. `lookup_user.py`
An interactive tool to search for specific users and update their Member ID.
- **Search**: Enter a Name, Email, or ID to find a member.
- **Inspect**: View full details JSON of a selected member.
- **Update**: Update the `memberId` of a selected user directly via the API.

### 3. `sync_members_from_csv.py`
A bulk update tool to synchronize `memberId` from a local CSV file to the MotorsportReg API.
- **Reads** a CSV file (default `members.csv`).
- **Matches** members by `uniqueId`.
- **Checks** if the API `memberId` matches the CSV `memberId`.
- **Updates** the API if there is a mismatch.
- **Logs** all operations to `logs/member_update_YYYYMMDD_HHMMSS.log`.

## Setup

### 1. Prerequisites
- Python 3.x
- pip

### 2. Installation
Install the required dependencies:
```bash
pip install -r requirements.txt
```

### 3. Environment Variables (.env)
You must create a `.env` file in the root directory to store your credentials.
**This file is NOT provided** for security reasons.

Create a file named `.env` with the following content:

```env
MSR_USERNAME="your_email@example.com"
MSR_PASSWORD="your_password"
MSR_ORG_ID="your_organization_id"
```

- `MSR_USERNAME`: Your MotorsportReg email/username.
- `MSR_PASSWORD`: Your MotorsportReg password.
- `MSR_ORG_ID`: The unique Organization ID (GUID) for your club.

### 4. Input Data (members.csv)
For the `sync_members_from_csv.py` script, you need a source CSV file.
**This file is NOT provided**.

Create a file named `members.csv` (or use the name generated by `main.py` output) with the following structure:

- The script expects a headerless (or valid) CSV where the columns align with:
  1. `firstName`
  2. `lastName`
  3. `memberId` (The value you want to push to MSR)
  4. `uniqueId` (The key used to find the user in MSR)
  5. `memberEnd` (Optional/Ignored for update purposes)

Example content:
```csv
John,Doe,1001,660852,12/31/2025
Jane,Smith,1002,676796,12/31/2025
```

## Usage

**List Members:**
```bash
python3 main.py
```

**Interactive Lookup:**
```bash
python3 lookup_user.py
```

**Bulk Sync:**
```bash
python3 sync_members_from_csv.py
```

**Notes:**
- All scripts use environment-based configuration for security.
- The `uniqueId` referred to in the logs and CSVs corresponds to the integer ID provided by MotorsportReg, while the API interactions use the UUID `id` (GUID).
- Logs are automatically rotated by timestamp in the `logs/` directory.


## About

This project was built with the assistance of **Antigravity**, an agentic AI coding assistant by Google Deepmind.

- **Antigravity Version**: 1.15.8
- **VSCode OSS Version**: 1.104.0
- **Commit**: 7a8657542180fb8440c8dcc20d83285fe11360ed
- **Date**: 2026-01-24T04:14:01.501Z
- **Electron**: 37.3.1
- **Chromium**: 138.0.7204.235
- **Node.js**: 22.18.0
- **V8**: 13.8.258.31-electron.0
- **OS**: Darwin arm64 24.6.0
- **Language Server CL**: 860355132

